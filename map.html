<!DOCTYPE html>
<html>
  <head>
    <title>Map</title>
    <style>
      #map{
        height: 800px;
        margin: auto;
      }
    </style>
    <script>
      function initMap() {
  const Renderer = new google.maps.DirectionsRenderer();
  const Service = new google.maps.DirectionsService();
  const Vancouver = { lat: 49.246292, lng: -123.116226 };
  const map = new google.maps.Map(document.getElementById("map"), {
    zoom: 4,
    center: Vancouver,
  });
  const marker = new google.maps.Marker({
    position: Vancouver,
    map: map,
  });
  Renderer.setMap(map)
  calculateRoute(Service,Renderer)
  document.getElementById("mode").addEventListener("change",()=>{
    calculateRoute(Service,Renderer)
  })
}
function calculateRoute(Service,Renderer){
  const mode = document.getElementById("mode").value;
  Service.route({
    origin: document.getElementById("from").value,
    destination: document.getElementById("to").value,
    travelMode: google.maps.TravelMode[mode]
  })
  .then((response)=>{
    Renderer.setDirections(response)
  })
  .catch((e)=>window.alert("request failed due to "+ status))
}
    </script>
  </head>
  <body>
    <h1>Google Map</h1>
    <p>This map will help you find trading locations</p>
    <form>
      <label for="from">Your Location</label>
      <input type="text" id ="from" placeholder="Origin">
      <br>
      <label for="to">Destination</label>
      <input type="text" id ="to" placeholder="Destination">
    </form>
    <b>Mode of travel</b>
    <select id = "mode">
      <option value="DRIVING">Driving</option>
      <option value="BICYCLING">Bicycling</option>
      <option value="TRANSIT">Transit</option>
      <option value="WALKING">Walking</option>
    </select>
    <div id="map"></div>
    <div id = "output"></div>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB_lNP7G_bJ9JDKoHEgjswbbFBIJQTadUc&callback=initMap&v=weekly"
      async
    ></script>
    <a href="/findclassmate">back to find classmate page</a>
  </body>
</html>